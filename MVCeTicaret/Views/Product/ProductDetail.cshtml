@model MVCeTicaret.Models.Product

@{
    ViewBag.Title = "ProductDetail";
}




<div class="container" style="margin-top:20px;">
    <div class="row" style="margin-top:50px;">
        <div class="thumbnail" style="height:650px;">
            <div class="col-md-5" style="margin-top:20px;">
                <img src="@Url.Content(Model.ImageUrl)" alt="@Url.Content(Model.AltText)" class="img-rounded">
            </div>

            <div class="col-md-7" style="margin-top:20px;">
                <p style="font-weight:bold;">@Url.Content(Model.Name)</p>
                <p class="glyphicon glyphicon-star" aria-hidden="true" style="color:red" />
                <p class="glyphicon glyphicon-star" aria-hidden="true" style="color:red" />
                <p class="glyphicon glyphicon-star" aria-hidden="true" style="color:red" />
                <p class="glyphicon glyphicon-star" aria-hidden="true" style="color:red" />
                <p class="glyphicon glyphicon-star" aria-hidden="true" style="color:red" />

                <p><b>Fiyat :</b> @String.Format("{0:C2}", Model.UnitPrice)</p>
                <span style="background-color:gold;"><b>Stok Miktarı :</b> @Model.UnitsInStock @Model.QuantityPerUnit</span>

                @using (Html.BeginForm("AddToCart", "Shopping", new { id = Model.ProductID }, FormMethod.Post))
                {
                    <p class="lead">
                        <b>Miktar :</b>
                        @{
                            if (Model.UnitsInStock == 0)
                            {
                                <input type = "number" name = "quantity" value = "0" min = "0" max = "@Model.UnitsInStock" onchange = "denetle(this, @Model.UnitsInStock)" />
                            }
                            else
                            {
                        <input type="number" name="quantity" value="1" min="1" max="@Model.UnitsInStock" onchange="denetle(this, @Model.UnitsInStock)" />
                            }
                        }
                    </p>
                    <br />
                    <br />
                    if (Model.UnitsInStock == 0)
                    {
                        <button type="submit" disabled class="btn btn-lg btn-success">Sepete Ekle</button>
                    }
                    else
                    {
                        <button type="submit" class="btn btn-lg btn-success">Sepete Ekle</button>
                    }
                            // TO DO: Hatalı..


                    <a href="@Url.Action("AddToWishlist", "Shopping", new { id = Model.ProductID })" class="btn btn-lg btn-warning">İstek Listesine Ekle</a>
                }





            </div>
        </div>

        <hr />


        <div class="row">
            <div class="col-md-4 col-md-offset-4">
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a href="#description" data-toggle="tab">Ürün Açıklaması</a>
                    </li>
                    <li>
                        <a href="#reviews" data-toggle="tab">Yorumlar</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane fade in active" id="description" style="margin-top:20px;">
                        @Html.Raw(Model.LongDescription)
                    </div>
                    <div class="tab-pane fade" id="reviews" style="margin-top:20px;">
                   

                        @{
                            foreach (var item in ViewData["Reviews"] as IEnumerable<MVCeTicaret.Models.Review>)
                            {
                                <li>
                                    <p><strong>@item.Name</strong></p>
                                    <p>@item.Comment</p>
                                </li>
                            }
                        }



                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

@section scripts{
    <script>
        function denetle(inputElement, maxValue) {
            var value = $(inputElement).val();
            if (value > maxValue)
                $(inputElement).val(maxValue)

            if (value < 0)
                $(inputElement).val(0);
        }
    </script>

}

